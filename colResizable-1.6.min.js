// colResizable 1.6 - a jQuery plugin by Alvaro Prieto Lauroba http://www.bacubacu.com/colresizable/

(function(t){var e,i=t(document),r=t("head"),o=null,d={},s=0,n="id",a="px",l="JColResizer",c="JCLRFlex",h=parseInt,f=Math,p=navigator.userAgent.indexOf("Trident/4.0")>0;try{e=sessionStorage}catch(t){}r.append("<style type='text/css'>  .JColResizer{table-layout:fixed;} .JColResizer > tbody > tr > td, .JColResizer > tbody > tr > th{overflow:hidden}  .JPadding > tbody > tr > td, .JPadding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .JCLRgrips{ height:0px; position:relative;} .JCLRgrip{margin-left:-5px; position:absolute; z-index:5; } .JCLRgrip .JColResizer{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .JCLRLastGrip{position:absolute; width:1px; } .JCLRgripDrag{ border-left:1px dotted black;\t} .JCLRFlex{width:auto!important;} .JCLRgrip.JCLRdisabledGrip .JColResizer{cursor:default; display:none;}</style>");var g=function(e,i){var o=t(e);if(o.opt=i,o.mode=i.resizeMode,o.dc=o.opt.disabledColumns,o.opt.removePadding&&o.addClass("JPadding"),o.opt.disable)return w(o);var a=o.id=o.attr(n)||l+s++;o.p=o.opt.postbackSafe,!o.is("table")||d[a]&&!o.opt.partialRefresh||("col-resize"!==o.opt.hoverCursor&&r.append("<style type='text/css'>.JCLRgrip .JColResizer:hover{cursor:"+o.opt.hoverCursor+"!important}</style>"),o.addClass(l).attr(n,a).before('<div class="JCLRgrips"/>'),o.g=[],o.c=[],o.w=o.width(),o.gc=o.prev(),o.f=o.opt.fixed,i.marginLeft&&o.gc.css("marginLeft",i.marginLeft),i.marginRight&&o.gc.css("marginRight",i.marginRight),o.cs=h(p?e.cellSpacing||e.currentStyle.borderSpacing:o.css("border-spacing"))||2,o.b=h(p?e.border||e.currentStyle.borderLeftWidth:o.css("border-left-width"))||1,d[a]=o,m(o))},u=function(i,r,o){if(r||e&&!e[i.id]){o=o||1;for(var d=v(i),s=2,n=i[0],a=0;a<d.length;a++){var l=t(d[a]),c=l[0],h=l.find("div:first-child");if(h&&h.length>0&&h.text().trim().length>0)for(var f=0,p=o*parseFloat(h.css("line-height"));h.height()>p;){var g=parseInt(c.clientWidth)+s+"px";if(c.style.width=g,n.style["min-width"]=n.clientWidth+s+"px",f++>1e3)break}}i.f||R(i),i.p&&e&&C(i)}},w=function(t){var e=t.attr(n),t=d[e];t&&t.is("table")&&(t.removeClass(l+" "+c).gc.remove(),delete d[e])},v=function(t){var e=t.find(">thead>tr:first>th,>thead>tr:first>td");return e.length||(e=t.find(">tbody>tr:first>th,>tr:first>th,>tbody>tr:first>td, >tr:first>td")),e=e.filter(":visible")},m=function(i){var r=v(i);i.cg=i.find("col"),i.ln=r.length,i.p&&e&&e[i.id]&&C(i,r),r.each(function(e){var r=t(this),o=i.dc.indexOf(e)!=-1,d=t(i.gc.append('<div class="JCLRgrip"></div>')[0].lastChild);d.append(o?"":i.opt.gripInnerHtml).append('<div class="'+l+'"></div>'),e==i.ln-1&&(d.addClass("JCLRLastGrip"),i.f&&d.html("")),d.bind("touchstart mousedown",L),o?d.addClass("JCLRdisabledGrip"):d.removeClass("JCLRdisabledGrip").bind("touchstart mousedown",L),d.t=i,d.i=e,d.c=r,r.w=r.width(),i.g.push(d),i.c.push(r),r.width(r.w).removeAttr("width"),d.data(l,{i:e,t:i.attr(n),last:e==i.ln-1})}),i.opt.autoFit&&u(i,i.opt.autoFitForce,i.opt.autoFitMaxLines),i.cg.removeAttr("width"),i.find("td, th").not(r).not("table th, table td").each(function(){t(this).removeAttr("width")}),i.f||i.removeAttr("width").addClass(c),b(i)},C=function(t,i){var r,o,d=0,s=0,n=[];if(i){if(t.cg.removeAttr("width"),t.opt.flush)return void(e[t.id]="");for(r=e[t.id].split(";"),o=r[t.ln+1],!t.f&&o&&(t.width(o*=1),t.opt.overflow&&(t.css("min-width",o+a),t.w=o));s<t.ln;s++)n.push(100*r[s]/r[t.ln]+"%"),i.eq(s).css("width",n[s]);for(s=0;s<t.ln;s++)t.cg.eq(s).css("width",n[s])}else{for(e[t.id]="";s<t.c.length;s++)r=t.c[s].innerWidth(),e[t.id]+=r+";",d+=r;e[t.id]+=d,t.f||(e[t.id]+=";"+t.width())}},b=function(t){t.gc.width(t.w);for(var e=0;e<t.ln;e++){var i=t.c[e];t.g[e].css({left:i.offset().left-t.offset().left+i.outerWidth(!1)+t.cs/2+a,height:t.opt.headerOnly?t.c[0].outerHeight(!1):t.outerHeight(!1)})}},x=function(t,e,i){var r=o.x-o.l,d=t.c[e],s=t.c[e+1],n=d.w+r,l=s.w-r;d.width(n+a),t.cg.eq(e).width(n+a),t.f?(s.width(l+a),t.cg.eq(e+1).width(l+a)):t.opt.overflow&&t.css("min-width",t.w+r),i&&(d.w=n,s.w=t.f?l:s.w)},R=function(e){var i=t.map(e.c,function(t){return t.width()});e.width(e.w=e.width()).removeClass(c),t.each(e.c,function(t,e){e.width(i[t]).w=i[t]}),e.addClass(c)},y=function(t){if(o){var e=o.t,i=t.originalEvent.touches,r=i?i[0].pageX:t.pageX,d=r-o.ox+o.l,s=e.opt.minWidth,n=o.i,l=1.5*e.cs+s+e.b,c=n==e.ln-1,h=n?e.g[n-1].position().left+e.cs+s:l,p=e.f?n==e.ln-1?e.w-l:e.g[n+1].position().left-e.cs-s:1/0;if(d=f.max(h,f.min(p,d)),o.x=d,o.css("left",d+a),c){var g=e.c[o.i];o.w=g.w+d-o.l}if(e.opt.liveDrag){c?(g.width(o.w),!e.f&&e.opt.overflow?e.css("min-width",e.w+d-o.l):e.w=e.width()):x(e,n),b(e);var u=e.opt.onDrag;u&&(t.currentTarget=e[0],u(t))}return!1}},J=function(r){if(i.unbind("touchend."+l+" mouseup."+l).unbind("touchmove."+l+" mousemove."+l),t("head :last-child").remove(),o){if(o.removeClass(o.t.opt.draggingClass),o.x-o.l!=0){var d=o.t,s=d.opt.onResize,n=o.i,a=n==d.ln-1,c=d.g[n].c;a?(c.width(o.w),c.w=o.w):x(d,n,!0),d.f||R(d),b(d),s&&(r.currentTarget=d[0],s(r)),d.p&&e&&C(d)}o=null}},L=function(e){var s=t(this).data(l),n=d[s.t],a=n.g[s.i],c=e.originalEvent.touches;if(a.ox=c?c[0].pageX:e.pageX,a.l=a.position().left,a.x=a.l,i.bind("touchmove."+l+" mousemove."+l,y).bind("touchend."+l+" mouseup."+l,J),r.append("<style type='text/css'>*{cursor:"+n.opt.dragCursor+"!important}</style>"),a.addClass(n.opt.draggingClass),o=a,n.c[s.i].l)for(var h,f=0;f<n.ln;f++)h=n.c[f],h.l=!1,h.w=h.width();return!1},z=function(){for(var t in d)if(d.hasOwnProperty(t)){t=d[t];var i,r=0;if(t.removeClass(l),t.f){for(t.w=t.width(),i=0;i<t.ln;i++)r+=t.c[i].w;for(i=0;i<t.ln;i++)t.c[i].css("width",f.round(1e3*t.c[i].w/r)/10+"%").l=!0}else R(t),"flex"==t.mode&&t.p&&e&&C(t);b(t.addClass(l))}};t(window).bind("resize."+l,z),t.fn.extend({colResizable:function(e){var i={resizeMode:"fit",draggingClass:"JCLRgripDrag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"col-resize",dragCursor:"col-resize",postbackSafe:!1,flush:!1,marginLeft:null,marginRight:null,disable:!1,partialRefresh:!1,disabledColumns:[],removePadding:!0,onDrag:null,onResize:null},e=t.extend(i,e);switch(e.fixed=!0,e.overflow=!1,e.resizeMode){case"flex":e.fixed=!1;break;case"overflow":e.fixed=!1,e.overflow=!0}return this.each(function(){g(this,e)})}})})(jQuery);