// colResizable 1.6 - a jQuery plugin by Alvaro Prieto Lauroba http://www.bacubacu.com/colresizable/

(function(t){var e,i="1.7.0",r=t(document),o=t("head"),n=null,a={},d=0,s="id",l="px",p="JColResizer",h="JCLRFlex",c=parseInt,f=Math,g=navigator.userAgent.indexOf("Trident/4.0")>0;try{e=sessionStorage}catch(t){}o.append("<style type='text/css'>.JColResizer{table-layout:fixed}.JColResizer>tbody>tr>td{width:0}.JColResizer>tbody>tr>td,.JColResizer>tbody>tr>th{overflow:hidden;word-break:break-word;overflow-wrap: break-word; word-wrap: break-word; -webkit-hyphens: auto; -ms-hyphens: auto; -moz-hyphens: auto; hyphens: auto;}.JPadding>tbody>tr>td,.JPadding>tbody>tr>th{padding-left:0!important;padding-right:0!important}.JCLRgrips{height:0;position:relative}.JCLRgrip{margin-left:-6px;position:absolute;z-index:5}.JCLRgrip .JColResizer{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor:col-resize;top:0}.JCLRLastGrip{margin-left:-10px;position:absolute;width:1px}.JCLRgripDrag .JColResizer{width:0;margin-left:0}.JCLRgripDrag{margin-left:-1px;border-left:1px dotted #000}.JCLRFlex{width:auto!important}.JCLRgrip.JCLRdisabledGrip .JColResizer{cursor:default;display:none}</style>");var u=function(i,r){var n=t(i);if(n.opt=r,n.mode=r.resizeMode,n.dc=n.opt.disabledColumns,n.opt.removePadding&&n.addClass("JPadding"),n.opt.disable)return v(n);var l=n.id=n.attr(s)||p+d++;n.p=n.opt.postbackSafe,!n.is("table")||a[l]&&!n.opt.partialRefresh||("col-resize"!==n.opt.hoverCursor&&o.append("<style type='text/css'>.JCLRgrip .JColResizer:hover{cursor:"+n.opt.hoverCursor+"!important}</style>"),n.addClass(p).attr(s,l).before('<div class="JCLRgrips"/>'),n.g=[],n.c=[],n.w=n.width(),n.gc=n.prev(),n.f=n.opt.fixed,r.marginLeft&&n.gc.css("marginLeft",r.marginLeft),r.marginRight&&n.gc.css("marginRight",r.marginRight),n.cs=c(g?i.cellSpacing||i.currentStyle.borderSpacing:n.css("border-spacing"))||2,n.b=c(g?i.border||i.currentStyle.borderLeftWidth:n.css("border-left-width"))||1,a[l]=n,n.opt.useLocalStorage&&(e=localStorage),C(n),n.p&&e&&x(n))},w=function(i){if(i.opt.autoFitForce||e){var r=m(i),o=i.opt.autoFitMaxLines||1;if(i.opt.autoFitForce||!e[b(i.id)]||e[b(i.id)].split(";").length-2!==r.length){var n=2,a=i[0];a.style["min-width"]="0px",a.style.width="0px",_.each(r,function(e){var i=t(e),r=t(i.find("div:first-child")[0]);r&&r.length>0&&r.text().trim().length>0&&(e.style.width="0px")});for(var d=null,s=0,l=0;l<r.length;l++){var p=t(r[l]),h=p[0],c=t(p.find("div:first-child")[0]),f=c.text().trim();if(c&&c.length>0&&f.length>0){var g=t("<div>").attr("style","position:absolute;left:0"),u=t("<div>").attr("style","width:0px; overflow: hidden;display:inline");g.append(u),g.appendTo(c.parent()),u.append(c);var w=c.width();p.prepend(c),g.remove(),u.remove(),c.css("width",w+"px"),w+=parseInt(p.css("padding-left"))+parseInt(p.css("padding-right")),c.css("width","");var v=w,C=v+i.opt.marginLeft+n+"px";h.style.width=C;for(var x=0,y=o*Math.ceil(parseFloat(c.css("line-height")))+1;c.height()>y;){var C=h.clientWidth+n+"px";if(h.style.width=C,x++>1e3)break;s++}v=parseInt(h.clientWidth),d=h,C=v+i.opt.marginLeft+n+"px",h.style.width=C}}if(i.opt.autoFitLastElement&&d){var R=i.parents("[width-target]:first").width(),J=R-t(a).innerWidth();J>0&&(C=d.clientWidth+J+"px",d.style.width=C)}var z=_.reduce(_.map(m(i,!0),function(e){return t(e).innerWidth()}),function(t,e){return t+e});a.style["min-width"]=z+"px",a.style.width=z+"px",i.f||L(i)}}},v=function(t){var e=t.attr(s),t=a[e];t&&t.is("table")&&(t.removeClass(p+" "+h).gc.remove(),delete a[e])},m=function(t,e){var i=t.find(">thead>tr:first>th,>thead>tr:first>td");return i.length||(i=t.find(">tbody>tr:first>th,>tr:first>th,>tbody>tr:first>td, >tr:first>td")),e||(i=i.filter(":visible")),i},b=function(t){return t+"_"+i},C=function(i){var r=m(i);i.cg=i.find("col"),i.ln=r.length,i.p&&e&&e[b(i.id)]&&e[b(i.id)].split(";").length-2===i.ln&&x(i,r),r.each(function(e){var r=t(this),o=i.dc.indexOf(e)!=-1,n=t(i.gc.append('<div class="JCLRgrip"></div>')[0].lastChild);n.append(o?"":i.opt.gripInnerHtml).append('<div class="'+p+'"></div>'),e==i.ln-1&&(n.addClass("JCLRLastGrip"),i.f&&n.html("")),n.bind("touchstart mousedown",k),o?n.addClass("JCLRdisabledGrip"):n.removeClass("JCLRdisabledGrip").bind("touchstart mousedown",k),n.t=i,n.i=e,n.c=r,r.w=r.width(),i.g.push(n),i.c.push(r),r.width(r.w).removeAttr("width"),n.data(p,{i:e,t:i.attr(s),last:e==i.ln-1})}),i.opt.autoFit&&w(i),i.cg.removeAttr("width"),i.find("td, th").not(r).not("table th, table td").each(function(){t(this).removeAttr("width")}),i.f||i.removeAttr("width").addClass(h),y(i)},x=function(t,i){var r,o,n=0,a=0,d=[];if(i){if(t.cg.removeAttr("width"),t.opt.flush)return void(e[b(t.id)]="");for(r=e[b(t.id)].split(";"),o=r[t.ln+1],!t.f&&o&&(t.width(o*=1),t.opt.overflow&&(t.css("min-width",o+l),t.w=o));a<t.ln;a++)d.push(r[a]+"px"),i.eq(a).css("width",d[a]),i.eq(a).innerWidth(r[a]);for(a=0;a<t.ln;a++)t.cg.eq(a).css("width",d[a])}else{for(e[b(t.id)]="";a<t.c.length;a++)r=t.c[a].innerWidth(),e[b(t.id)]+=r+";",n+=r;e[b(t.id)]+=n,t.f||(e[b(t.id)]+=";"+t.width())}},y=function(t,e){if(!e||t.w!==t.gc.width()){t.gc.width(t.w);for(var i=0;i<t.ln;i++){var r=t.c[i];t.g[i].css({left:r.offset().left-t.offset().left+r.outerWidth(!1)+t.cs/2+l,height:t.opt.headerOnly?t.c[0].outerHeight(!1):t.outerHeight(!1)})}}},R=function(t,e,i){var r=n.x-n.l,o=t.c[e],a=t.c[e+1],d=o.w+r,s=a.w-r;o.width(d+l),t.cg.eq(e).width(d+l),t.f?(a.width(s+l),t.cg.eq(e+1).width(s+l)):t.opt.overflow&&t.css("min-width",t.w+r),i&&(o.w=d,a.w=t.f?s:a.w)},L=function(e){var i=t.map(e.c,function(t){return t.width()});e.width(e.w=e.width()).removeClass(h),t.each(e.c,function(t,e){e.width(i[t]).w=i[t]}),e.addClass(h)},J=function(t){if(n){var e=n.t,i=t.originalEvent.touches,r=i?i[0].pageX:t.pageX,o=r-n.ox+n.l,a=e.opt.minWidth,d=n.i,s=1.5*e.cs+a+e.b,p=d==e.ln-1,h=d?e.g[d-1].position().left+e.cs+a:s,c=e.f?d==e.ln-1?e.w-s:e.g[d+1].position().left-e.cs-a:1/0;if(o=f.max(h,f.min(c,o)),n.x=o,n.css("left",o+l),p){var g=e.c[n.i];n.w=g.w+o-n.l}if(e.opt.liveDrag){p?(g.width(n.w),!e.f&&e.opt.overflow?e.css("min-width",e.w+o-n.l):e.w=e.width()):R(e,d),y(e,!0);var u=e.opt.onDrag;u&&(t.currentTarget=e[0],u(t))}return!1}},z=function(t,e,i){var r,o,n,a=null,d=0;i||(i={});var s=function(){d=i.leading===!1?0:Date.now(),a=null,n=t.apply(r,o),a||(r=o=null)};return function(){var l=Date.now();d||i.leading!==!1||(d=l);var p=e-(l-d);return r=this,o=arguments,p<=0||p>e?(a&&(clearTimeout(a),a=null),d=l,n=t.apply(r,o),a||(r=o=null)):a||i.trailing===!1||(a=setTimeout(s,p)),n}},W=function(i){if(r.unbind("touchend."+p+" mouseup."+p).unbind("touchmove."+p+" mousemove."+p),t("head :last-child").remove(),n){if(n.removeClass(n.t.opt.draggingClass),n.x-n.l!=0){var o=n.t,a=o.opt.onResize,d=n.i,s=d==o.ln-1,l=o.g[d].c;s?(l.width(n.w),l.w=n.w):R(o,d,!0),o.f||L(o),y(o),a&&(i.currentTarget=o[0],a(i)),o.p&&e&&x(o)}n=null}},k=function(e){var i=t(this).data(p),d=a[i.t],s=d.g[i.i],l=e.originalEvent.touches;if(s.ox=l?l[0].pageX:e.pageX,s.l=s.position().left,s.x=s.l,r.bind("touchmove."+p+" mousemove."+p,z(J,10)).bind("touchend."+p+" mouseup."+p,W),o.append("<style type='text/css'>*{cursor:"+d.opt.dragCursor+"!important}</style>"),s.addClass(d.opt.draggingClass),n=s,d.c[i.i].l)for(var h,c=0;c<d.ln;c++)h=d.c[c],h.l=!1,h.w=h.width();return!1},F=function(){for(var t in a)if(a.hasOwnProperty(t)){t=a[t];var i,r=0;if(t.removeClass(p),t.f){for(t.w=t.width(),i=0;i<t.ln;i++)r+=t.c[i].w;for(i=0;i<t.ln;i++)t.c[i].css("width",f.round(1e3*t.c[i].w/r)/10+"%").l=!0}else L(t),"flex"==t.mode&&t.p&&e&&x(t);y(t.addClass(p))}};t(window).bind("resize."+p,F),t.fn.extend({colResizable:function(e){var i={resizeMode:"fit",draggingClass:"JCLRgripDrag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"col-resize",dragCursor:"col-resize",postbackSafe:!1,flush:!1,marginLeft:null,marginRight:null,disable:!1,partialRefresh:!1,disabledColumns:[],removePadding:!0,useLocalStorage:!0,onDrag:null,onResize:null},e=t.extend(i,e);switch(e.fixed=!0,e.overflow=!1,e.resizeMode){case"flex":e.fixed=!1;break;case"overflow":e.fixed=!1,e.overflow=!0}return this.each(function(){u(this,e)})}})})(jQuery);